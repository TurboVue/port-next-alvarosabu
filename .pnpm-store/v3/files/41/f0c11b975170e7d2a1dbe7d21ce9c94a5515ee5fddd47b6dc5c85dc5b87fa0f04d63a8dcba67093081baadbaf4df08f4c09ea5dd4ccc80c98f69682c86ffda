'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var pathe = require('pathe');
var fs = require('fs');
var mlly = require('mlly');
var utils = require('./utils.cjs');
require('url');

const ESM_EXT_RE = /\.(es|esm|esm-browser|esm-bundler|es6|module)\.js$/;
const ESM_FOLDER_RE = /\/esm\/(.*\.js)$/;
const defaultInline = [
  /virtual:/,
  /\.ts$/,
  ESM_EXT_RE,
  ESM_FOLDER_RE
];
const depsExternal = [
  /\.cjs\.js$/,
  /\.mjs$/
];
function guessCJSversion(id) {
  if (id.match(ESM_EXT_RE)) {
    for (const i of [
      id.replace(ESM_EXT_RE, ".mjs"),
      id.replace(ESM_EXT_RE, ".umd.js"),
      id.replace(ESM_EXT_RE, ".cjs.js"),
      id.replace(ESM_EXT_RE, ".js")
    ]) {
      if (fs.existsSync(i))
        return i;
    }
  }
  if (id.match(ESM_FOLDER_RE)) {
    for (const i of [
      id.replace(ESM_FOLDER_RE, "/umd/$1"),
      id.replace(ESM_FOLDER_RE, "/cjs/$1"),
      id.replace(ESM_FOLDER_RE, "/$1")
    ]) {
      if (fs.existsSync(i))
        return i;
    }
  }
}
async function shouldExternalize(id, options, cache = new Map()) {
  if (!cache.has(id))
    cache.set(id, _shouldExternalize(id, options));
  return cache.get(id);
}
async function _shouldExternalize(id, options) {
  if (mlly.isNodeBuiltin(id))
    return id;
  if (id.startsWith("data:"))
    return id;
  id = patchWindowsImportPath(id);
  if (matchExternalizePattern(id, options == null ? void 0 : options.inline))
    return false;
  if (matchExternalizePattern(id, options == null ? void 0 : options.external))
    return id;
  const isNodeModule = id.includes("/node_modules/");
  const guessCJS = isNodeModule && (options == null ? void 0 : options.fallbackCJS);
  id = guessCJS ? guessCJSversion(id) || id : id;
  if (matchExternalizePattern(id, defaultInline))
    return false;
  if (matchExternalizePattern(id, depsExternal))
    return id;
  const isDist = id.includes("/dist/");
  if ((isNodeModule || isDist) && await mlly.isValidNodeImport(id))
    return id;
  return false;
}
function matchExternalizePattern(id, patterns) {
  if (!patterns)
    return false;
  for (const ex of patterns) {
    if (typeof ex === "string") {
      if (id.includes(`/node_modules/${ex}/`))
        return true;
    } else {
      if (ex.test(id))
        return true;
    }
  }
  return false;
}
function patchWindowsImportPath(path) {
  if (path.match(/^\w:\\/))
    return `file:///${utils.slash(path)}`;
  else if (path.match(/^\w:\//))
    return `file:///${path}`;
  else
    return path;
}

var __defProp = Object.defineProperty;
var __defProps = Object.defineProperties;
var __getOwnPropDescs = Object.getOwnPropertyDescriptors;
var __getOwnPropSymbols = Object.getOwnPropertySymbols;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __propIsEnum = Object.prototype.propertyIsEnumerable;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __spreadValues = (a, b) => {
  for (var prop in b || (b = {}))
    if (__hasOwnProp.call(b, prop))
      __defNormalProp(a, prop, b[prop]);
  if (__getOwnPropSymbols)
    for (var prop of __getOwnPropSymbols(b)) {
      if (__propIsEnum.call(b, prop))
        __defNormalProp(a, prop, b[prop]);
    }
  return a;
};
var __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));
const RealDate = Date;
class ViteNodeServer {
  constructor(server, options = {}) {
    this.server = server;
    this.options = options;
    this.fetchPromiseMap = new Map();
    this.transformPromiseMap = new Map();
    this.fetchCache = new Map();
  }
  shouldExternalize(id) {
    return shouldExternalize(id, this.options.deps);
  }
  async resolveId(id, importer) {
    if (importer && !importer.startsWith(this.server.config.root))
      importer = pathe.join(this.server.config.root, importer);
    return this.server.pluginContainer.resolveId(id, importer, { ssr: true });
  }
  async fetchModule(id) {
    if (!this.fetchPromiseMap.has(id)) {
      this.fetchPromiseMap.set(id, this._fetchModule(id).then((r) => {
        return this.options.sourcemap !== true ? __spreadProps(__spreadValues({}, r), { map: void 0 }) : r;
      }).finally(() => {
        this.fetchPromiseMap.delete(id);
      }));
    }
    return this.fetchPromiseMap.get(id);
  }
  async transformRequest(id) {
    if (!this.transformPromiseMap.has(id)) {
      this.transformPromiseMap.set(id, this._transformRequest(id).finally(() => {
        this.transformPromiseMap.delete(id);
      }));
    }
    return this.transformPromiseMap.get(id);
  }
  getTransformMode(id) {
    var _a, _b, _c, _d;
    const withoutQuery = id.split("?")[0];
    if ((_b = (_a = this.options.transformMode) == null ? void 0 : _a.web) == null ? void 0 : _b.some((r) => withoutQuery.match(r)))
      return "web";
    if ((_d = (_c = this.options.transformMode) == null ? void 0 : _c.ssr) == null ? void 0 : _d.some((r) => withoutQuery.match(r)))
      return "ssr";
    if (withoutQuery.match(/\.([cm]?[jt]sx?|json)$/))
      return "ssr";
    return "web";
  }
  async _fetchModule(id) {
    let result;
    const filePath = utils.toFilePath(id, this.server.config.root);
    const module = this.server.moduleGraph.getModuleById(id);
    const timestamp = (module == null ? void 0 : module.lastHMRTimestamp) || RealDate.now();
    const cache = this.fetchCache.get(filePath);
    if (timestamp && cache && cache.timestamp >= timestamp)
      return cache.result;
    const externalize = await this.shouldExternalize(filePath);
    if (externalize) {
      result = { externalize };
    } else {
      const r = await this._transformRequest(id);
      result = { code: r == null ? void 0 : r.code, map: r == null ? void 0 : r.map };
    }
    this.fetchCache.set(filePath, {
      timestamp,
      result
    });
    return result;
  }
  async _transformRequest(id) {
    let result = null;
    if (this.getTransformMode(id) === "web") {
      result = await this.server.transformRequest(id);
      if (result)
        result = await this.server.ssrTransform(result.code, result.map, id);
    } else {
      result = await this.server.transformRequest(id, { ssr: true });
    }
    const sourcemap = this.options.sourcemap ?? "inline";
    if (sourcemap === "inline" && result && !id.includes("node_modules"))
      utils.withInlineSourcemap(result);
    return result;
  }
}

exports.ViteNodeServer = ViteNodeServer;
exports.guessCJSversion = guessCJSversion;
exports.shouldExternalize = shouldExternalize;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2VydmVyLmNqcyIsInNvdXJjZXMiOlsiLi4vc3JjL2V4dGVybmFsaXplLnRzIiwiLi4vc3JjL3NlcnZlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGlzdHNTeW5jIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBpc05vZGVCdWlsdGluLCBpc1ZhbGlkTm9kZUltcG9ydCB9IGZyb20gJ21sbHknXG5pbXBvcnQgdHlwZSB7IERlcHNIYW5kbGluZ09wdGlvbnMgfSBmcm9tICcuL3R5cGVzJ1xuaW1wb3J0IHsgc2xhc2ggfSBmcm9tICcuL3V0aWxzJ1xuXG5jb25zdCBFU01fRVhUX1JFID0gL1xcLihlc3xlc218ZXNtLWJyb3dzZXJ8ZXNtLWJ1bmRsZXJ8ZXM2fG1vZHVsZSlcXC5qcyQvXG5jb25zdCBFU01fRk9MREVSX1JFID0gL1xcL2VzbVxcLyguKlxcLmpzKSQvXG5cbmNvbnN0IGRlZmF1bHRJbmxpbmUgPSBbXG4gIC92aXJ0dWFsOi8sXG4gIC9cXC50cyQvLFxuICBFU01fRVhUX1JFLFxuICBFU01fRk9MREVSX1JFLFxuXVxuXG5jb25zdCBkZXBzRXh0ZXJuYWwgPSBbXG4gIC9cXC5janNcXC5qcyQvLFxuICAvXFwubWpzJC8sXG5dXG5cbmV4cG9ydCBmdW5jdGlvbiBndWVzc0NKU3ZlcnNpb24oaWQ6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIGlmIChpZC5tYXRjaChFU01fRVhUX1JFKSkge1xuICAgIGZvciAoY29uc3QgaSBvZiBbXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcubWpzJyksXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcudW1kLmpzJyksXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcuY2pzLmpzJyksXG4gICAgICBpZC5yZXBsYWNlKEVTTV9FWFRfUkUsICcuanMnKSxcbiAgICBdKSB7XG4gICAgICBpZiAoZXhpc3RzU3luYyhpKSlcbiAgICAgICAgcmV0dXJuIGlcbiAgICB9XG4gIH1cbiAgaWYgKGlkLm1hdGNoKEVTTV9GT0xERVJfUkUpKSB7XG4gICAgZm9yIChjb25zdCBpIG9mIFtcbiAgICAgIGlkLnJlcGxhY2UoRVNNX0ZPTERFUl9SRSwgJy91bWQvJDEnKSxcbiAgICAgIGlkLnJlcGxhY2UoRVNNX0ZPTERFUl9SRSwgJy9janMvJDEnKSxcbiAgICAgIGlkLnJlcGxhY2UoRVNNX0ZPTERFUl9SRSwgJy8kMScpLFxuICAgIF0pIHtcbiAgICAgIGlmIChleGlzdHNTeW5jKGkpKVxuICAgICAgICByZXR1cm4gaVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2hvdWxkRXh0ZXJuYWxpemUoXG4gIGlkOiBzdHJpbmcsXG4gIG9wdGlvbnM/OiBEZXBzSGFuZGxpbmdPcHRpb25zLFxuICBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBQcm9taXNlPHN0cmluZyB8IGZhbHNlPj4oKSxcbikge1xuICBpZiAoIWNhY2hlLmhhcyhpZCkpXG4gICAgY2FjaGUuc2V0KGlkLCBfc2hvdWxkRXh0ZXJuYWxpemUoaWQsIG9wdGlvbnMpKVxuICByZXR1cm4gY2FjaGUuZ2V0KGlkKSFcbn1cblxuYXN5bmMgZnVuY3Rpb24gX3Nob3VsZEV4dGVybmFsaXplKFxuICBpZDogc3RyaW5nLFxuICBvcHRpb25zPzogRGVwc0hhbmRsaW5nT3B0aW9ucyxcbik6IFByb21pc2U8c3RyaW5nIHwgZmFsc2U+IHtcbiAgaWYgKGlzTm9kZUJ1aWx0aW4oaWQpKVxuICAgIHJldHVybiBpZFxuXG4gIC8vIGRhdGE6IHNob3VsZCBiZSBwcm9jZXNzZWQgYnkgbmF0aXZlIGltcG9ydCxcbiAgLy8gc2luY2UgaXQgaXMgYSBmZWF0dXJlIG9mIEVTTVxuICBpZiAoaWQuc3RhcnRzV2l0aCgnZGF0YTonKSlcbiAgICByZXR1cm4gaWRcblxuICBpZCA9IHBhdGNoV2luZG93c0ltcG9ydFBhdGgoaWQpXG5cbiAgaWYgKG1hdGNoRXh0ZXJuYWxpemVQYXR0ZXJuKGlkLCBvcHRpb25zPy5pbmxpbmUpKVxuICAgIHJldHVybiBmYWxzZVxuICBpZiAobWF0Y2hFeHRlcm5hbGl6ZVBhdHRlcm4oaWQsIG9wdGlvbnM/LmV4dGVybmFsKSlcbiAgICByZXR1cm4gaWRcblxuICBjb25zdCBpc05vZGVNb2R1bGUgPSBpZC5pbmNsdWRlcygnL25vZGVfbW9kdWxlcy8nKVxuICBjb25zdCBndWVzc0NKUyA9IGlzTm9kZU1vZHVsZSAmJiBvcHRpb25zPy5mYWxsYmFja0NKU1xuICBpZCA9IGd1ZXNzQ0pTID8gZ3Vlc3NDSlN2ZXJzaW9uKGlkKSB8fCBpZCA6IGlkXG5cbiAgaWYgKG1hdGNoRXh0ZXJuYWxpemVQYXR0ZXJuKGlkLCBkZWZhdWx0SW5saW5lKSlcbiAgICByZXR1cm4gZmFsc2VcbiAgaWYgKG1hdGNoRXh0ZXJuYWxpemVQYXR0ZXJuKGlkLCBkZXBzRXh0ZXJuYWwpKVxuICAgIHJldHVybiBpZFxuXG4gIGNvbnN0IGlzRGlzdCA9IGlkLmluY2x1ZGVzKCcvZGlzdC8nKVxuICBpZiAoKGlzTm9kZU1vZHVsZSB8fCBpc0Rpc3QpICYmIGF3YWl0IGlzVmFsaWROb2RlSW1wb3J0KGlkKSlcbiAgICByZXR1cm4gaWRcblxuICByZXR1cm4gZmFsc2Vcbn1cblxuZnVuY3Rpb24gbWF0Y2hFeHRlcm5hbGl6ZVBhdHRlcm4oaWQ6IHN0cmluZywgcGF0dGVybnM/OiAoc3RyaW5nIHwgUmVnRXhwKVtdKSB7XG4gIGlmICghcGF0dGVybnMpXG4gICAgcmV0dXJuIGZhbHNlXG4gIGZvciAoY29uc3QgZXggb2YgcGF0dGVybnMpIHtcbiAgICBpZiAodHlwZW9mIGV4ID09PSAnc3RyaW5nJykge1xuICAgICAgaWYgKGlkLmluY2x1ZGVzKGAvbm9kZV9tb2R1bGVzLyR7ZXh9L2ApKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGlmIChleC50ZXN0KGlkKSlcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlXG59XG5cbmZ1bmN0aW9uIHBhdGNoV2luZG93c0ltcG9ydFBhdGgocGF0aDogc3RyaW5nKSB7XG4gIGlmIChwYXRoLm1hdGNoKC9eXFx3OlxcXFwvKSlcbiAgICByZXR1cm4gYGZpbGU6Ly8vJHtzbGFzaChwYXRoKX1gXG4gIGVsc2UgaWYgKHBhdGgubWF0Y2goL15cXHc6XFwvLykpXG4gICAgcmV0dXJuIGBmaWxlOi8vLyR7cGF0aH1gXG4gIGVsc2VcbiAgICByZXR1cm4gcGF0aFxufVxuIiwiaW1wb3J0IHsgam9pbiB9IGZyb20gJ3BhdGhlJ1xuaW1wb3J0IHR5cGUgeyBUcmFuc2Zvcm1SZXN1bHQsIFZpdGVEZXZTZXJ2ZXIgfSBmcm9tICd2aXRlJ1xuaW1wb3J0IHR5cGUgeyBGZXRjaFJlc3VsdCwgUmF3U291cmNlTWFwLCBWaXRlTm9kZVJlc29sdmVJZCwgVml0ZU5vZGVTZXJ2ZXJPcHRpb25zIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCB7IHNob3VsZEV4dGVybmFsaXplIH0gZnJvbSAnLi9leHRlcm5hbGl6ZSdcbmltcG9ydCB7IHRvRmlsZVBhdGgsIHdpdGhJbmxpbmVTb3VyY2VtYXAgfSBmcm9tICcuL3V0aWxzJ1xuXG5leHBvcnQgKiBmcm9tICcuL2V4dGVybmFsaXplJ1xuXG4vLyBzdG9yZSB0aGUgb3JpZ2luYWwgcmVmZXJlbmNlIHRvIGF2b2lkIGl0IGJlZW4gbW9ja2VkXG5jb25zdCBSZWFsRGF0ZSA9IERhdGVcblxuZXhwb3J0IGNsYXNzIFZpdGVOb2RlU2VydmVyIHtcbiAgcHJpdmF0ZSBmZXRjaFByb21pc2VNYXAgPSBuZXcgTWFwPHN0cmluZywgUHJvbWlzZTxGZXRjaFJlc3VsdD4+KClcbiAgcHJpdmF0ZSB0cmFuc2Zvcm1Qcm9taXNlTWFwID0gbmV3IE1hcDxzdHJpbmcsIFByb21pc2U8VHJhbnNmb3JtUmVzdWx0IHwgbnVsbCB8IHVuZGVmaW5lZD4+KClcblxuICBmZXRjaENhY2hlID0gbmV3IE1hcDxzdHJpbmcsIHtcbiAgICB0aW1lc3RhbXA6IG51bWJlclxuICAgIHJlc3VsdDogRmV0Y2hSZXN1bHRcbiAgfT4oKVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBzZXJ2ZXI6IFZpdGVEZXZTZXJ2ZXIsXG4gICAgcHVibGljIG9wdGlvbnM6IFZpdGVOb2RlU2VydmVyT3B0aW9ucyA9IHt9LFxuICApIHt9XG5cbiAgc2hvdWxkRXh0ZXJuYWxpemUoaWQ6IHN0cmluZykge1xuICAgIHJldHVybiBzaG91bGRFeHRlcm5hbGl6ZShpZCwgdGhpcy5vcHRpb25zLmRlcHMpXG4gIH1cblxuICBhc3luYyByZXNvbHZlSWQoaWQ6IHN0cmluZywgaW1wb3J0ZXI/OiBzdHJpbmcpOiBQcm9taXNlPFZpdGVOb2RlUmVzb2x2ZUlkIHwgbnVsbD4ge1xuICAgIGlmIChpbXBvcnRlciAmJiAhaW1wb3J0ZXIuc3RhcnRzV2l0aCh0aGlzLnNlcnZlci5jb25maWcucm9vdCkpXG4gICAgICBpbXBvcnRlciA9IGpvaW4odGhpcy5zZXJ2ZXIuY29uZmlnLnJvb3QsIGltcG9ydGVyKVxuICAgIHJldHVybiB0aGlzLnNlcnZlci5wbHVnaW5Db250YWluZXIucmVzb2x2ZUlkKGlkLCBpbXBvcnRlciwgeyBzc3I6IHRydWUgfSlcbiAgfVxuXG4gIGFzeW5jIGZldGNoTW9kdWxlKGlkOiBzdHJpbmcpOiBQcm9taXNlPEZldGNoUmVzdWx0PiB7XG4gICAgLy8gcmV1c2UgdHJhbnNmb3JtIGZvciBjb25jdXJyZW50IHJlcXVlc3RzXG4gICAgaWYgKCF0aGlzLmZldGNoUHJvbWlzZU1hcC5oYXMoaWQpKSB7XG4gICAgICB0aGlzLmZldGNoUHJvbWlzZU1hcC5zZXQoaWQsXG4gICAgICAgIHRoaXMuX2ZldGNoTW9kdWxlKGlkKVxuICAgICAgICAgIC50aGVuKChyKSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zLnNvdXJjZW1hcCAhPT0gdHJ1ZSA/IHsgLi4uciwgbWFwOiB1bmRlZmluZWQgfSA6IHJcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZmV0Y2hQcm9taXNlTWFwLmRlbGV0ZShpZClcbiAgICAgICAgICB9KSxcbiAgICAgIClcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hQcm9taXNlTWFwLmdldChpZCkhXG4gIH1cblxuICBhc3luYyB0cmFuc2Zvcm1SZXF1ZXN0KGlkOiBzdHJpbmcpIHtcbiAgICAvLyByZXVzZSB0cmFuc2Zvcm0gZm9yIGNvbmN1cnJlbnQgcmVxdWVzdHNcbiAgICBpZiAoIXRoaXMudHJhbnNmb3JtUHJvbWlzZU1hcC5oYXMoaWQpKSB7XG4gICAgICB0aGlzLnRyYW5zZm9ybVByb21pc2VNYXAuc2V0KGlkLFxuICAgICAgICB0aGlzLl90cmFuc2Zvcm1SZXF1ZXN0KGlkKVxuICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudHJhbnNmb3JtUHJvbWlzZU1hcC5kZWxldGUoaWQpXG4gICAgICAgICAgfSksXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybVByb21pc2VNYXAuZ2V0KGlkKSFcbiAgfVxuXG4gIGdldFRyYW5zZm9ybU1vZGUoaWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHdpdGhvdXRRdWVyeSA9IGlkLnNwbGl0KCc/JylbMF1cblxuICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNmb3JtTW9kZT8ud2ViPy5zb21lKHIgPT4gd2l0aG91dFF1ZXJ5Lm1hdGNoKHIpKSlcbiAgICAgIHJldHVybiAnd2ViJ1xuICAgIGlmICh0aGlzLm9wdGlvbnMudHJhbnNmb3JtTW9kZT8uc3NyPy5zb21lKHIgPT4gd2l0aG91dFF1ZXJ5Lm1hdGNoKHIpKSlcbiAgICAgIHJldHVybiAnc3NyJ1xuXG4gICAgaWYgKHdpdGhvdXRRdWVyeS5tYXRjaCgvXFwuKFtjbV0/W2p0XXN4P3xqc29uKSQvKSlcbiAgICAgIHJldHVybiAnc3NyJ1xuICAgIHJldHVybiAnd2ViJ1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfZmV0Y2hNb2R1bGUoaWQ6IHN0cmluZyk6IFByb21pc2U8RmV0Y2hSZXN1bHQ+IHtcbiAgICBsZXQgcmVzdWx0OiBGZXRjaFJlc3VsdFxuXG4gICAgY29uc3QgZmlsZVBhdGggPSB0b0ZpbGVQYXRoKGlkLCB0aGlzLnNlcnZlci5jb25maWcucm9vdClcblxuICAgIGNvbnN0IG1vZHVsZSA9IHRoaXMuc2VydmVyLm1vZHVsZUdyYXBoLmdldE1vZHVsZUJ5SWQoaWQpXG4gICAgY29uc3QgdGltZXN0YW1wID0gbW9kdWxlPy5sYXN0SE1SVGltZXN0YW1wIHx8IFJlYWxEYXRlLm5vdygpXG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmZldGNoQ2FjaGUuZ2V0KGZpbGVQYXRoKVxuICAgIGlmICh0aW1lc3RhbXAgJiYgY2FjaGUgJiYgY2FjaGUudGltZXN0YW1wID49IHRpbWVzdGFtcClcbiAgICAgIHJldHVybiBjYWNoZS5yZXN1bHRcblxuICAgIGNvbnN0IGV4dGVybmFsaXplID0gYXdhaXQgdGhpcy5zaG91bGRFeHRlcm5hbGl6ZShmaWxlUGF0aClcbiAgICBpZiAoZXh0ZXJuYWxpemUpIHtcbiAgICAgIHJlc3VsdCA9IHsgZXh0ZXJuYWxpemUgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHIgPSBhd2FpdCB0aGlzLl90cmFuc2Zvcm1SZXF1ZXN0KGlkKVxuICAgICAgcmVzdWx0ID0geyBjb2RlOiByPy5jb2RlLCBtYXA6IHI/Lm1hcCBhcyB1bmtub3duIGFzIFJhd1NvdXJjZU1hcCB9XG4gICAgfVxuXG4gICAgdGhpcy5mZXRjaENhY2hlLnNldChmaWxlUGF0aCwge1xuICAgICAgdGltZXN0YW1wLFxuICAgICAgcmVzdWx0LFxuICAgIH0pXG5cbiAgICByZXR1cm4gcmVzdWx0XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF90cmFuc2Zvcm1SZXF1ZXN0KGlkOiBzdHJpbmcpIHtcbiAgICBsZXQgcmVzdWx0OiBUcmFuc2Zvcm1SZXN1bHQgfCBudWxsID0gbnVsbFxuXG4gICAgaWYgKHRoaXMuZ2V0VHJhbnNmb3JtTW9kZShpZCkgPT09ICd3ZWInKSB7XG4gICAgICAvLyBmb3IgY29tcG9uZW50cyBsaWtlIFZ1ZSwgd2Ugd2FudCB0byB1c2UgdGhlIGNsaWVudCBzaWRlXG4gICAgICAvLyBwbHVnaW5zIGJ1dCB0aGVuIGNvbnZlcnQgdGhlIGNvZGUgdG8gYmUgY29uc3VtZWQgYnkgdGhlIHNlcnZlclxuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZXJ2ZXIudHJhbnNmb3JtUmVxdWVzdChpZClcbiAgICAgIGlmIChyZXN1bHQpXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHRoaXMuc2VydmVyLnNzclRyYW5zZm9ybShyZXN1bHQuY29kZSwgcmVzdWx0Lm1hcCwgaWQpXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5zZXJ2ZXIudHJhbnNmb3JtUmVxdWVzdChpZCwgeyBzc3I6IHRydWUgfSlcbiAgICB9XG5cbiAgICBjb25zdCBzb3VyY2VtYXAgPSB0aGlzLm9wdGlvbnMuc291cmNlbWFwID8/ICdpbmxpbmUnXG4gICAgaWYgKHNvdXJjZW1hcCA9PT0gJ2lubGluZScgJiYgcmVzdWx0ICYmICFpZC5pbmNsdWRlcygnbm9kZV9tb2R1bGVzJykpXG4gICAgICB3aXRoSW5saW5lU291cmNlbWFwKHJlc3VsdClcblxuICAgIHJldHVybiByZXN1bHRcbiAgfVxufVxuIl0sIm5hbWVzIjpbImV4aXN0c1N5bmMiLCJpc05vZGVCdWlsdGluIiwiaXNWYWxpZE5vZGVJbXBvcnQiLCJzbGFzaCIsImpvaW4iLCJ0b0ZpbGVQYXRoIiwid2l0aElubGluZVNvdXJjZW1hcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUtBLE1BQU0sVUFBYSxHQUFBLG9EQUFBLENBQUE7QUFDbkIsTUFBTSxhQUFnQixHQUFBLGtCQUFBLENBQUE7QUFFdEIsTUFBTSxhQUFnQixHQUFBO0FBQUEsRUFDcEIsVUFBQTtBQUFBLEVBQ0EsT0FBQTtBQUFBLEVBQ0EsVUFBQTtBQUFBLEVBQ0EsYUFBQTtBQUFBLENBQUEsQ0FBQTtBQUdGLE1BQU0sWUFBZSxHQUFBO0FB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
